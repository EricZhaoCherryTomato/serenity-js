
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Retrofitting Â· Serenity/JS Handbook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="Jan Molak">
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-advanced-emoji/emoji-website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../website-1548870939230.css">
        
    

        
    
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="installation.html" />
    
    
    <link rel="prev" href="prerequisites.html" />
    

    <link href="http://serenity-js.org/updates.rss" title="Serenity/JS Handbook" rel="alternate" type="application/rss+xml" />

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Serenity/JS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../introduction.html">
            
                <a href="../introduction.html">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../changelog.html">
            
                <a href="../changelog.html">
            
                    
                    Changelog
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Tutorial</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../from-scripts-to-serenity/readme.html">
            
                <a href="../from-scripts-to-serenity/readme.html">
            
                    
                    From scripts to serenity
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="../from-scripts-to-serenity/speaking-the-right-language.html">
            
                <a href="../from-scripts-to-serenity/speaking-the-right-language.html">
            
                    
                    Speaking the right language
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2" data-path="../from-scripts-to-serenity/writing-what-you-would-like-to-read.html">
            
                <a href="../from-scripts-to-serenity/writing-what-you-would-like-to-read.html">
            
                    
                    Writing what you'd like to read
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3" data-path="../from-scripts-to-serenity/making-the-tests-speak-for-themselves.html">
            
                <a href="../from-scripts-to-serenity/making-the-tests-speak-for-themselves.html">
            
                    
                    Making the tests speak for themselves
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Guide</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="readme.html">
            
                <a href="readme.html">
            
                    
                    Overview
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1" data-path="reporting.html">
            
                <a href="reporting.html">
            
                    
                    Reporting
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2" data-path="prerequisites.html">
            
                <a href="prerequisites.html">
            
                    
                    Prerequisites
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="3.1.3" data-path="retrofitting.html">
            
                <a href="retrofitting.html">
            
                    
                    Retrofitting
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.4" data-path="installation.html">
            
                <a href="installation.html">
            
                    
                    Installation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.5" data-path="configuration.html">
            
                <a href="configuration.html">
            
                    
                    Configuration
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../cucumber/readme.html">
            
                <a href="../cucumber/readme.html">
            
                    
                    Cucumber
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.2.1" data-path="../cucumber/overview.html">
            
                <a href="../cucumber/overview.html">
            
                    
                    Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.2" data-path="../cucumber/automation.html">
            
                <a href="../cucumber/automation.html">
            
                    
                    Automation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.3" data-path="../cucumber/execution.html">
            
                <a href="../cucumber/execution.html">
            
                    
                    Execution
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="../mocha/readme.html">
            
                <a href="../mocha/readme.html">
            
                    
                    Mocha
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.3.1" data-path="../mocha/overview.html">
            
                <a href="../mocha/overview.html">
            
                    
                    Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.2" data-path="../mocha/automation.html">
            
                <a href="../mocha/automation.html">
            
                    
                    Automation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.3" data-path="../mocha/execution.html">
            
                <a href="../mocha/execution.html">
            
                    
                    Execution
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="../design/readme.html">
            
                <a href="../design/readme.html">
            
                    
                    Design
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.4.1" data-path="../design/screenplay-pattern.html">
            
                <a href="../design/screenplay-pattern.html">
            
                    
                    The Screenplay Pattern
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4.2" data-path="../design/stage.html">
            
                <a href="../design/stage.html">
            
                    
                    Stage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4.3" data-path="../design/assertions.html">
            
                <a href="../design/assertions.html">
            
                    
                    Assertions
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../community.html">
            
                <a href="../community.html">
            
                    
                    Community events and articles
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="../support.html">
            
                <a href="../support.html">
            
                    
                    Support
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="../license.html">
            
                <a href="../license.html">
            
                    
                    License
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Retrofitting</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="retrofitting"><a name="retrofitting" class="plugin-anchor" href="#retrofitting"><i class="fa fa-link" aria-hidden="true"></i></a>Retrofitting</h1>
<p>In the most basic scenario, Serenity/JS can act as an integration layer between the Protractor 
test runner and either of the Cucumber or Mocha test frameworks.</p>
<p>Using Serenity/JS as a drop-in replacement of 
the <a href="https://github.com/mattfritz/protractor-cucumber-framework/" target="_blank"><code>cucumber-protractor-framework</code></a>
or the <code>mocha framework adapter</code> that <a href="https://github.com/angular/protractor/tree/master/lib/frameworks" target="_blank">ships with Protractor</a>
enables you to:</p>
<ul>
<li>Run your tests in parallel and still get the aggregated test reports.</li>
<li>Enhance your test reports with screenshots of your app&apos;s UI without any additional plugins.</li>
<li>Fix some common problems related to Cucumber/WebDriver 
ControlFlow synchronisation and inaccurate reporting with just a single config change.</li>
<li>Try the <a href="../design/screenplay-pattern.html">Screenplay Pattern</a> 
in some part of your project while keeping your other tests working as they used to.
This way you minimise the risk of disrupting the work of your team while improving your tool set.</li>
</ul>
<p>To use Serenity/JS as an integration layer between Protractor  and Cucumber or Mocha, 
execute the below terminal command in your project directory to install the <code>serenity-js</code> module and save it as a <code>devDependency</code>
in your <code>package.json</code> file:</p>
<pre><code class="lang-bash">$&gt; npm install serenity-js --save-dev
</code></pre>
<p>With the <code>serenity-js</code> module installed, you can update your 
<a href="configuration.html">Protractor configuration file</a>
to include:</p>
<pre><code class="lang-javascript">exports.config = {
    framework: <span class="hljs-string">&apos;custom&apos;</span>,
    frameworkPath: <span class="hljs-built_in">require</span>.resolve(<span class="hljs-string">&apos;serenity-js&apos;</span>), 
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>Serenity/JS detects whether to use Cucumber or Mocha based on the presence 
of <a href="configuration.html#cucumber"><code>cucumberOpts</code></a> 
or <a href="configuration.html#mocha"><code>mochaOpts</code></a>, respectively.
If you prefer, you can tell Serenity/JS which test framework you&apos;d like to use explicitly too:</p>
<pre><code class="lang-javascript">exports.config = {
    framework: <span class="hljs-string">&apos;custom&apos;</span>,
    frameworkPath: <span class="hljs-built_in">require</span>.resolve(<span class="hljs-string">&apos;serenity-js&apos;</span>),

    serenity: {
        dialect: <span class="hljs-string">&apos;cucumber&apos;</span>     <span class="hljs-comment">// or &apos;mocha&apos;</span>
    }
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>That&apos;s it! You can execute your tests the same way you used to.</p>
<p>Now you can learn more about the <a href="configuration.html">configuration options</a> supported by 
<a href="../mocha/readme.html"><code>serenity-mocha</code></a> and 
<a href="../cucumber/readme.html"><code>serenity-cucumber</code></a> adapters and
running the tests using their respective test frameworks, or <a href="reporting.html">configure the reporting</a> to convert
the intermediary JSON reports produced by <code>serenity-js</code> to HTML.</p>
<hr>
<h3 id="your-feedback-matters"><a name="your-feedback-matters" class="plugin-anchor" href="#your-feedback-matters"><i class="fa fa-link" aria-hidden="true"></i></a>Your feedback matters!</h3>
<p>Suggest features and improvements on <a href="https://github.com/jan-molak/serenity-js/issues" target="_blank">github</a>,
get in touch on <a href="https://twitter.com/JanMolak" target="_blank">twitter</a>,
and if you found Serenity/JS useful - don&apos;t forget to give it a star! &#x2605;</p>
<p><a class="github-button" href="https://github.com/jan-molak/serenity-js" data-icon="octicon-star" data-style="mega" data-count-href="/jan-molak/serenity-js/stargazers" data-count-api="/repos/jan-molak/serenity-js#stargazers_count" data-count-aria-label="# stargazers on GitHub" aria-label="Star jan-molak/serenity-js on GitHub" target="_blank">Star</a></p>
<script async defer src="https://buttons.github.io/buttons.js"></script>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="prerequisites.html" class="navigation navigation-prev " aria-label="Previous page: Prerequisites">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="installation.html" class="navigation navigation-next " aria-label="Next page: Installation">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Retrofitting","level":"3.1.3","depth":2,"next":{"title":"Installation","level":"3.1.4","depth":2,"path":"overview/installation.md","ref":"overview/installation.md","articles":[]},"previous":{"title":"Prerequisites","level":"3.1.2","depth":2,"path":"overview/prerequisites.md","ref":"overview/prerequisites.md","articles":[]},"dir":"ltr"},"config":{"plugins":["anchors","advanced-emoji","editlink","include-codeblock","ga","github","rss","sitemap","styles-less","youtube"],"root":"./book","styles":{"website":"website-1548870939230.css"},"pluginsConfig":{"youtube":{},"github":{"url":"https://github.com/jan-molak/serenity-js"},"editlink":{"label":"Edit on github","multilingual":false,"base":"https://github.com/jan-molak/serenity-js/edit/master/book"},"styles-less":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"rss":{"image_url":"http://serenity-js.org/assets/images/serenity-js-eye.svg","author":"Jan Molak","feed_url":"http://serenity-js.org/updates.rss","managingEditor":"jan.molak@smartcodeltd.co.uk (Jan Molak)","webMaster":"jan.molak@smartcodeltd.co.uk (Jan Molak)","site_url":"http://serenity-js.org/","title":"Serenity/JS Handbook","categories":["book","manual","tutorial","bdd","tdd","testing","protractor","mocha","cucumber","angular","bdd","selenium","webdriverjs","webdriver"],"description":"A comprehensive reference manual and tutorials for Serenity/JS, a next generation automated testing library."},"highlight":{},"sitemap":{"hostname":"http://serenity-js.org/"},"ga":{"configuration":"auto","token":"UA-85788349-2"},"advanced-emoji":{"embedEmojis":false},"include-codeblock":{"check":false,"edit":false,"lang":"","fixlang":false,"template":"default","theme":"chrome","unindent":false},"sharing":{"facebook":true,"twitter":true,"google":true,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper","vk"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchors":{}},"theme":"default","author":"Jan Molak","custom":{},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{"package":{"license":"Apache-2.0","config":{"commitizen":{"path":"./node_modules/cz-lerna-changelog"}},"scripts":{"semantic-release":"lerna-semantic-release pre && lerna-semantic-release post && lerna-semantic-release perform","prebook:publish":"npm run book:clean && npm run book:build","coverage:merge":"istanbul-merge --out=./target/coverage/coverage-final.json ./target/coverage/**/coverage-final.json","coverage:report":"nyc report --reporter=html --reporter=lcov --temp-directory=./target/coverage --report-dir=./target/coverage","clean":"rimraf target","lerna":"lerna","report":"npm run coverage:merge && npm run coverage:report","commit":"git-cz","travis-deploy-once":"travis-deploy-once","book:clean":"rimraf _book","verify":"lerna run verify --stream && npm run report","postinstall":"lerna bootstrap --hoist && link-parent-bin","gitbook":"gitbook","semantic-release-dry-run":"lerna-semantic-release pre && lerna-semantic-release post","coverage:publish":"cat ./target/coverage/lcov.info | node ./node_modules/coveralls/bin/coveralls.js","book:build":"gitbook build","book:publish":"node ./gh-pages.js -d _book --dotfiles"},"repository":{"type":"git","url":"https://github.com/jan-molak/serenity-js.git"},"keywords":["protractor","mocha","cucumber","angular","tdd","bdd","test","selenium","webdriverjs","webdriver","testing"],"author":"Jan Molak <jan.molak@smartcodeltd.co.uk>","name":"serenity-js","homepage":"http://serenity-js.org","engines":{"node":">= 6.9.x","npm":">= 3"},"greenkeeper":{"ignore":["@types/node","tslint","tslint-microsoft-contrib","typescript","nyc","gitbook-cli","gitbook-plugin-addcssjs","gitbook-plugin-advanced-emoji","gitbook-plugin-anchors","gitbook-plugin-editlink","gitbook-plugin-ga","gitbook-plugin-github","gitbook-plugin-include-codeblock","gitbook-plugin-rss","gitbook-plugin-sitemap","gitbook-plugin-styles-less","gitbook-plugin-youtube"]},"version":"0.0.1","description":"Serenity/JS: Next generation acceptance testing library for modern web applications.","devDependencies":{"lerna-semantic-release":"9.1.0","rimraf":"2.6.3","@types/sinon":"4.3.3","gitbook-plugin-ga":"1.0.1","istanbul":"0.4.5","tslint":"4.4.2","gitbook-plugin-advanced-emoji":"0.2.1","sinon-chai":"3.3.0","@types/chai":"4.1.4","@types/mocha":"5.2.1","chai-as-promised":"7.1.1","typescript":"2.3.4","coveralls":"3.0.1","gitbook-plugin-rss":"3.0.0","gitbook-plugin-github":"2.0.0","lerna":"3.10.7","gitbook-plugin-editlink":"1.0.2","gitbook-plugin-sitemap":"1.2.0","chai":"4.1.2","istanbul-merge":"1.1.1","gitbook-cli":"2.3.0","tslint-microsoft-contrib":"4.0.0","mocha-testdata":"1.2.0","ts-node":"7.0.1","commitizen":"3.0.5","gitbook-plugin-include-codeblock":"3.0.2","gitbook-plugin-addcssjs":"1.0.2","gitbook-plugin-anchors":"0.7.1","sinon":"7.2.3","link-parent-bin":"0.2.3","travis-deploy-once":"^5.0.0","@types/node":"6.0.96","gh-pages":"2.0.0","nyc":"10.1.2","@types/sinon-chai":"3.2.2","@types/chai-as-promised":"7.1.0","mocha":"5.2.0","gitbook-plugin-youtube":"1.1.0","gitbook-plugin-styles-less":"1.0.0","ts-helper":"0.0.1","cz-lerna-changelog":"2.0.2"},"bugs":{"url":"https://github.com/jan-molak/serenity-js/issues"}},"api_version":"0.0.1"},"title":"Serenity/JS Handbook","gitbook":"*","description":"A comprehensive reference manual and tutorials for Serenity/JS, a next generation automated testing library"},"file":{"path":"overview/retrofitting.md","mtime":"2019-01-30T17:45:43.085Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-01-30T17:55:37.531Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        

    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-editlink/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-ga/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-rss/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    



    </body>
</html>

